/*! For license information please see vendor.js.LICENSE.txt */
"use strict";(self.webpackChunkgulp_template=self.webpackChunkgulp_template||[]).push([[121],{683:(t,e,s)=>{s.d(e,{Pw:()=>c});var n=Object.defineProperty,a=(t,e,s)=>(((t,e,s)=>{e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s})(t,"symbol"!=typeof e?e+"":e,s),s);const i={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}};class r{constructor(t={}){a(this,"opts",{}),a(this,"memo",new Map);const e={...t};if(null!=e.tokens){e.tokens=e.tokensReplace?{...e.tokens}:{...i,...e.tokens};for(const t of Object.values(e.tokens))"string"==typeof t.pattern&&(t.pattern=new RegExp(t.pattern))}else e.tokens=i;Array.isArray(e.mask)&&(e.mask.length>1?e.mask=[...e.mask].sort((t,e)=>t.length-e.length):e.mask=e.mask[0]??""),""===e.mask&&(e.mask=null),this.opts=e}masked(t){return this.process(t,this.findMask(t))}unmasked(t){return this.process(t,this.findMask(t),!1)}isEager(){return!0===this.opts.eager}isReversed(){return!0===this.opts.reversed}completed(t){const e=this.findMask(t);if(null==this.opts.mask||null==e)return!1;const s=this.process(t,e).length;return"string"==typeof this.opts.mask?s>=this.opts.mask.length:"function"==typeof this.opts.mask?s>=e.length:this.opts.mask.filter(t=>s>=t.length).length===this.opts.mask.length}findMask(t){const e=this.opts.mask;if(null==e)return null;if("string"==typeof e)return e;if("function"==typeof e)return e(t);const s=this.process(t,e.slice(-1).pop()??"",!1);return e.find(e=>this.process(t,e,!1).length>=s.length)??""}escapeMask(t){const e=[],s=[];return t.split("").forEach((n,a)=>{"!"===n&&"!"!==t[a-1]?s.push(a-s.length):e.push(n)}),{mask:e.join(""),escaped:s}}process(t,e,s=!0){if(null==e)return t;const n=`value=${t},mask=${e},masked=${s?1:0}`;if(this.memo.has(n))return this.memo.get(n);const{mask:a,escaped:i}=this.escapeMask(e),r=[],o=null!=this.opts.tokens?this.opts.tokens:{},l=this.isReversed()?-1:1,p=this.isReversed()?"unshift":"push",h=this.isReversed()?0:a.length-1,u=this.isReversed()?()=>k>-1&&f>-1:()=>k<a.length&&f<t.length,c=t=>!this.isReversed()&&t<=h||this.isReversed()&&t>=h;let d,m=-1,k=this.isReversed()?a.length-1:0,f=this.isReversed()?t.length-1:0,g=!1;for(;u();){const e=a.charAt(k),n=o[e],u=null!=(null==n?void 0:n.transform)?n.transform(t.charAt(f)):t.charAt(f);if(i.includes(k)||null==n?(s&&!this.isEager()&&r[p](e),u!==e||this.isEager()?d=e:f+=l,this.isEager()||(k+=l)):(null!=u.match(n.pattern)?(r[p](u),n.repeated?(-1===m?m=k:k===h&&k!==m&&(k=m-l),h===m&&(k-=l)):n.multiple&&(g=!0,k-=l),k+=l):n.multiple?g&&(k+=l,f-=l,g=!1):u===d?d=void 0:n.optional&&(k+=l,f-=l),f+=l),this.isEager())for(;c(k)&&(null==o[a.charAt(k)]||i.includes(k));)s?r[p](a.charAt(k)):a.charAt(k)===t.charAt(f)&&(f+=l),k+=l}return this.memo.set(n,r.join("")),this.memo.get(n)}}const o=t=>JSON.parse(t.replaceAll("'",'"')),l=(t,e={})=>{const s={...e};return null!=t.dataset.maska&&""!==t.dataset.maska&&(s.mask=h(t.dataset.maska)),null!=t.dataset.maskaEager&&(s.eager=p(t.dataset.maskaEager)),null!=t.dataset.maskaReversed&&(s.reversed=p(t.dataset.maskaReversed)),null!=t.dataset.maskaTokensReplace&&(s.tokensReplace=p(t.dataset.maskaTokensReplace)),null!=t.dataset.maskaTokens&&(s.tokens=u(t.dataset.maskaTokens)),s},p=t=>""===t||!!JSON.parse(t),h=t=>t.startsWith("[")&&t.endsWith("]")?o(t):t,u=t=>{if(t.startsWith("{")&&t.endsWith("}"))return o(t);const e={};return t.split("|").forEach(t=>{const s=t.split(":");e[s[0]]={pattern:new RegExp(s[1]),optional:"optional"===s[2],multiple:"multiple"===s[2],repeated:"repeated"===s[2]}}),e};class c{constructor(t,e={}){a(this,"items",new Map),a(this,"beforeinputEvent",t=>{const e=t.target,s=this.items.get(e);s.isEager()&&"inputType"in t&&t.inputType.startsWith("delete")&&s.unmasked(e.value).length<=1&&this.setMaskedValue(e,"")}),a(this,"inputEvent",t=>{if(t instanceof CustomEvent&&"input"===t.type&&null!=t.detail&&"object"==typeof t.detail&&"masked"in t.detail)return;const e=t.target,s=this.items.get(e),n=e.value,a=e.selectionStart,i=e.selectionEnd;let r=n;if(s.isEager()){const e=s.masked(n),a=s.unmasked(n);""===a&&"data"in t&&null!=t.data?r=t.data:a!==s.unmasked(e)&&(r=a)}if(this.setMaskedValue(e,r),"inputType"in t&&(t.inputType.startsWith("delete")||null!=a&&a<n.length))try{e.setSelectionRange(a,i)}catch{}}),this.options=e,"string"==typeof t?this.init(Array.from(document.querySelectorAll(t)),this.getMaskOpts(e)):this.init("length"in t?Array.from(t):[t],this.getMaskOpts(e))}destroy(){for(const t of this.items.keys())t.removeEventListener("input",this.inputEvent),t.removeEventListener("beforeinput",this.beforeinputEvent);this.items.clear()}needUpdateOptions(t,e){const s=this.items.get(t),n=new r(l(t,this.getMaskOpts(e)));return JSON.stringify(s.opts)!==JSON.stringify(n.opts)}needUpdateValue(t){const e=t.dataset.maskaValue;return null==e&&""!==t.value||null!=e&&e!==t.value}getMaskOpts(t){const{onMaska:e,preProcess:s,postProcess:n,...a}=t;return a}init(t,e){for(const s of t){const t=new r(l(s,e));this.items.set(s,t),""!==s.value&&this.setMaskedValue(s,s.value),s.addEventListener("input",this.inputEvent),s.addEventListener("beforeinput",this.beforeinputEvent)}}setMaskedValue(t,e){const s=this.items.get(t);null!=this.options.preProcess&&(e=this.options.preProcess(e));const n=s.masked(e),a={masked:n,unmasked:s.unmasked(s.isEager()?n:e),completed:s.completed(e)};e=n,null!=this.options.postProcess&&(e=this.options.postProcess(e)),t.value=e,t.dataset.maskaValue=e,null!=this.options.onMaska&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(t=>t(a)):this.options.onMaska(a)),t.dispatchEvent(new CustomEvent("maska",{detail:a})),t.dispatchEvent(new CustomEvent("input",{detail:a}))}}}}]);